//>>built
define("xstyle/core/generate",["xstyle/core/elemental","put-selector/put","xstyle/core/utils","xstyle/core/expression"],function(z,l,F,G){function H(a,l,f,r){a&&a.receive?a.receive(l,f,r):l(a)}function v(a,A){w++;a=a.sort?a:[a];return function(f,r,q){var e=f;if(f._contentNode)f=f._contentNode;else{if(void 0===q){var h=f.childNodes,m=h[0],x;if(m){x=n.createDocumentFragment();do x.appendChild(m);while(m=h[0])}}f.content=x}for(var B=0,C=[f],h=0,m=a.length;h<m;h++){var D=d,d=a[h];try{if(d.eachProperty)if(d.args)if("("==
d.operator){var p=a[h+1];p&&p.eachProperty&&l(e,p.selector);var E=d.args.toString(),w=G(d.parent,0,E);(function(k,c){F.when(w,function(a){a.forElement&&(a=a.forElement(k));var g=k.appendChild(n.createTextNode("Loading"));H(a,function(b){if(b&&b.sort)if(g&&(g.parentNode.removeChild(g),g=null),b.isSequence)v(b,d.parent)(k,r,q);else{k.innerHTML="";var e=c&&c.eachProperty&&c.each,e=e?v(e,c):function(b,c,a){return l(a||b,(a?"-":"")+(I[b.tagName]||"span"),c)},f=b.map(function(b){return e(k,b,null)});b.observe&&
b.observe(function(b,c,a){if(-1<c){var d=f[c];d.parentNode.removeChild(d);f.splice(c,1)}-1<a&&f.splice(a,0,e(k,b,f[a]||null))},!0)}else b&&b.nodeType?(g&&(g.parentNode.removeChild(g),g=null),k.appendChild(b)):(b=void 0===b?"":b,k.tagName in J?(k.value=b,k["-x-variable"]=a):g.nodeValue=b)},A,E)})})(e,p)}else l(e,d.toString());else l(e,d.selector),z.update(e,d.selector);else if("string"==typeof d){"\x3d"==d.charAt(0)&&(d=d.slice(1));var c=e,p=a[h+1],t=[];d.replace(/([,\n]+)?([\t ]+)?(\.|#)?([-\w%$|\.\#]+)(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,
function(){t.push(arguments)});for(var u=0;u<t.length;u++)(function(a,d,h,g,b,m,n){h&&d&&(a=h.length,a>B?C[a]=c:c=C[a]||c,B=a);c=c._contentNode||c;var s;g?s=(D&&D.args?"":"span")+g+b:(g=b.match(/^[-\w]+/)[0],(a=A.getDefinition(g))&&a.appendTo?(c=a.appendTo(c,q),(b=b.slice(g.length))&&l(c,b)):s=b);s&&(c=l(q||c,(q?"-":"")+s));q=null;m&&c.setAttribute(m,""===n?m:n);r&&(c.item=r);(u<t.length-1||c!=e&&c!=f&&(!p||!p.base))&&z.update(c);e=c}).apply(this,t[u])}else e.appendChild(n.createTextNode(d.value))}catch(y){console.error(y,
y.stack),e.appendChild(n.createTextNode(y))}}return e}}var w=0,I={TABLE:"tr",TBODY:"tr",TR:"td",UL:"li",OL:"li",SELECT:"option"},J={INPUT:1,TEXTAREA:1,SELECT:1},n=document;return v});
//@ sourceMappingURL=generate.js.map