//>>built
define("dojo-local-storage/LocalStorage",["dojo/_base/declare","dojo/_base/lang","dojo/json","dojo/store/util/QueryResults","dojo/store/util/SimpleQueryEngine"],function(g,h,f,k,l){return g(null,{idProperty:"id",queryEngine:l,subsetProperty:null,subsetName:null,constructor:function(a){h.mixin(this,a);this.setData(this.data||[])},get:function(a){var b=localStorage.getItem(a),c=null;try{c=f.parse(b);c[this.idProperty]=a;if(this.subsetProperty){if(c[this.subsetProperty]!==this.subsetName)return;delete c[this.subsetProperty]}return c}catch(d){}},
getIdentity:function(a){return a[this.idProperty]},put:function(a,b){var c=b&&b.id||a[this.idProperty]||Math.random();this.subsetProperty&&(a[this.subsetProperty]=this.subsetName);localStorage.setItem(c,f.stringify(a));return c},add:function(a,b){if(this.get(a[this.idProperty]))throw Error("Object already exists");return this.put(a,b)},remove:function(a){localStorage.removeItem(a)},query:function(a,b){for(var c=[],d=0,e=null,e=null,d=0;d<localStorage.length;d+=1)e=localStorage.key(d),(e=this.get(e))&&
c.push(e);return k(this.queryEngine(a,b)(c))},setData:function(a){var b=0,c=null;a.items&&(this.idProperty=a.identifier,a=this.data=a.items);for(b=0;b<a.length;b+=1)c=a[b],this.put(c)}})});