//>>built
define("xstyle/core/parser",[],function(){function G(){return this.join("")}function E(f){this.value=f}function F(z,u,v){function A(k,p){function q(a){b?b.push?"string"==typeof b[b.length-1]&&"string"==typeof a?b[b.length-1]+=a:a&&b.push(a):"string"==typeof b&&"string"==typeof a?b+=a:(a=[b,a],a.toString=G,b=a):b=a}k=k.replace(H,"");target=z;for(var w=f.lastIndex=0,r=!0,g="",s=!0;;){var n=f.exec(k),d=n[4],c=n[1],l=n[2],e=n[3],a,m,b,B,e=e&&C(e),c=C(c);s?(l?(m=c,a=l.charAt(0),B="?"==l.charAt(1)):e=c,
b=e,s=!1):(e=l?c+l:c,q(e));"{"!=d&&(g+=n[0]);switch(d){case "'":case '"':var x="'"==d?I:J;x.lastIndex=f.lastIndex;(d=x.exec(k))||t("unterminated string");e=d[1];f.lastIndex=x.lastIndex;q(new E(e));g+=d[0];continue;case "\\":d=x.lastIndex++;q(k.charAt(d));continue;case "(":case "{":case "[":var h,n=!1;if("{"==d){s=!0;":"==a&&(c+=l);g=C((g+c).replace(/\s+/g," ").replace(/([\.#:])\S+|\w+/g,function(b,a){return a?b:b.toLowerCase()}));q(h=target.newRule(g));"\x3d"==a&&(r=!1,b.creating=!0,e&&(n=!0));":"==
a&&!target.root&&(b.creating=!0);var l=null,u=w;if(target.root&&r)for(var v=p.cssRules||p.rules;l=v[w++];)if(l.selectorText==g){h.cssRule=l;break}l||(h.ruleIndex=w=u,h.styleSheet=p);h.selector=b.creating?"."+("\x3d"==a?c.replace(/[^\w-]/g,""):"")+"-x-"+K++:target.root?g:target.selector+" "+g;g=""}else c=e.match(/(.*?)([\w-]*)$/),q(h=target.newCall(c[2],b,target)),h.ref=target.getDefinition(c[2]),(b.calls||(b.calls=[])).push(h);h.parent=target;n&&e.replace(/(?:^|,|>)\s*([\w-]+)/g,function(b,a){var c=
target.getDefinition(a);c?c.extend(h,!0):(h.tagName=a,a in D?c=D[a]:(c=(element=document.createElement(a)).toString(),c=D[a]=!("[object HTMLUnknownElement]"==c||"[object]"==c)),c||t("Extending undefined definition "+a))});target.currentName=m;target.currentSequence=b;target.assignmentOperator=a;":"==a&&"{"==d&&(m=target.getDefinition(":"+e))&&m.pseudo&&m.pseudo(target,e);y.push(target=h);target.operator=d;target.start=f.lastIndex;b=m=null;continue}if(b)if(c=b[0]||b,c.charAt&&"@"==c.charAt(0))"import"==
b[0].slice(1,7)&&(e=F.getStyleSheet((p.cssRules||p.imports)[w++],b,p),c=f.lastIndex,A(e.localSource,e),f.lastIndex=c);else if(a)try{target[":"==a?"setValue":"declareProperty"](m,b,B)}catch(L){t(L)}switch(d){case ":":"\x3d"==a?(s=!0,a=":"):q(":");break;case "}":case ")":case "]":M[target.operator]!=d&&t("Incorrect opening operator "+target.operator+" with closing operator "+d);m=null;a=k.slice(target.start,f.lastIndex-1);target.cssText=target.cssText?target.cssText+";"+a:a;"}"==d&&("}"==N&&(r=target.parent.selector)&&
"@"==!r.charAt(0)&&t("A nested rule must end with a semicolon"),target.onRule(target.selector,target),r=!0,g="");y.pop();target=y[y.length-1];b=target.currentSequence;m=target.currentName;a=target.assignmentOperator;if(target.root&&"}"==d){if(a)try{target[":"==a?"setValue":"declareProperty"](m,b[1]||b,B)}catch(O){t(O)}s=!0;a=!1}break;case "":return;case ";":b=null,s=!0,a=r=!1,g=""}var N=d}}function t(k){console.error(k.message||k,"line "+u.slice(0,f.lastIndex).split("\n").length+" in "+(v.href||"in-page stylesheet"));
k.stack&&console.error(k.stack)}var y=[z];z.parse=A;A(u,v)}var f=/\s*((?:[^{\}\[\]\(\)\\'":=;]|\[(?:[^\]'"]|'(?:\\.|[^'])*'|"(?:\\.|[^"])*")\])*)([=:]\??\s*([^{\}\[\]\(\)\\'":;]*))?([{\}\[\]\(\)\\'":;]|$)/g,I=/((?:\\.|[^'])*)'/g,J=/((?:\\.|[^"])*)"/g,H=/\/\*[\w\W]*?\*\//g,M={"{":"}","[":"]","(":")"},K=0,C="".trim?function(f){return f.trim()}:function(f){return f.replace(/^\s+|\s+$/g,"")};E.prototype.toString=function(){return'"'+this.value.replace(/["\\\n\r]/g,"\\$\x26")+'"'};var D={};return F});
//@ sourceMappingURL=parser.js.map