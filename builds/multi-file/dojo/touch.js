//>>built
define("dojo/touch","./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(C,q,D,E,F,f,m,n,r,c){function h(a,d,b){return s&&b?function(a,d){return f(a,b,d)}:p?function(b,t){var c=f(b,d,t),e=f(b,a,function(a){(!k||(new Date).getTime()>k+1E3)&&t.call(this,a)});return{remove:function(){c.remove();e.remove()}}}:function(b,d){return f(b,a,d)}}function G(a){do if(a.dojoClick)return a.dojoClick;while(a=a.parentNode)}function u(a,d,b){if(e=
!a.target.disabled&&G(a.target))v=a.target,w=a.touches?a.touches[0].pageX:a.clientX,x=a.touches?a.touches[0].pageY:a.clientY,y=("object"==typeof e?e.x:"number"==typeof e?e:0)||4,z=("object"==typeof e?e.y:"number"==typeof e?e:0)||4,A||(A=!0,c.doc.addEventListener(d,function(a){e=e&&a.target==v&&Math.abs((a.touches?a.touches[0].pageX:a.clientX)-w)<=y&&Math.abs((a.touches?a.touches[0].pageY:a.clientY)-x)<=z},!0),c.doc.addEventListener(b,function(a){if(e){B=(new Date).getTime();var b=a.target;"LABEL"===
b.tagName&&(b=D.byId(b.getAttribute("for"))||b);setTimeout(function(){f.emit(b,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a=function(a){c.doc.addEventListener(a,function(a){!a._dojo_click&&((new Date).getTime()<=B+1E3&&!("INPUT"==a.target.tagName&&E.contains(a.target,"dijitOffScreen")))&&(a.stopImmediatePropagation(),("INPUT"!=a.target.tagName||"radio"==a.target.type||"checkbox"==a.target.type)&&"TEXTAREA"!=a.target.tagName&&a.preventDefault())},!0)},a("click"),a("mousedown"),a("mouseup"))}
var p=m("touch"),l=5>m("ios"),s=navigator.msPointerEnabled,A,e,v,w,x,y,z,B,k,g;p&&(s?r(function(){c.doc.addEventListener("MSPointerDown",function(a){u(a,"MSPointerMove","MSPointerUp")},!0)}):r(function(){function a(a){var b=F.delegate(a,{bubbles:!0});6<=m("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}g=c.body();c.doc.addEventListener("touchstart",function(a){k=
(new Date).getTime();var b=g;g=a.target;f.emit(b,"dojotouchout",{relatedTarget:g,bubbles:!0});f.emit(g,"dojotouchover",{relatedTarget:b,bubbles:!0});u(a,"touchmove","touchend")},!0);f(c.doc,"touchmove",function(d){k=(new Date).getTime();var b=c.doc.elementFromPoint(d.pageX-(l?0:c.global.pageXOffset),d.pageY-(l?0:c.global.pageYOffset));b&&(g!==b&&(f.emit(g,"dojotouchout",{relatedTarget:b,bubbles:!0}),f.emit(b,"dojotouchover",{relatedTarget:g,bubbles:!0}),g=b),f.emit(b,"dojotouchmove",a(d)))});f(c.doc,
"touchend",function(d){k=(new Date).getTime();var b=c.doc.elementFromPoint(d.pageX-(l?0:c.global.pageXOffset),d.pageY-(l?0:c.global.pageYOffset))||c.body();f.emit(b,"dojotouchend",a(d))})}));q={press:h("mousedown","touchstart","MSPointerDown"),move:h("mousemove","dojotouchmove","MSPointerMove"),release:h("mouseup","dojotouchend","MSPointerUp"),cancel:h(n.leave,"touchcancel",p?"MSPointerCancel":null),over:h("mouseover","dojotouchover","MSPointerOver"),out:h("mouseout","dojotouchout","MSPointerOut"),
enter:n._eventHandler(h("mouseover","dojotouchover","MSPointerOver")),leave:n._eventHandler(h("mouseout","dojotouchout","MSPointerOut"))};return C.touch=q});
//@ sourceMappingURL=touch.js.map