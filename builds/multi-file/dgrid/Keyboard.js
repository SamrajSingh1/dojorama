//>>built
define("dgrid/Keyboard","dojo/_base/declare,dojo/aspect,dojo/on,./List,dojo/_base/lang,dojo/has,put-selector/put,dojo/_base/Deferred,dojo/_base/sniff".split(","),function(q,r,k,x,s,i,n,t){var u={checkbox:1,radio:1,button:1},v=/\bdgrid-cell\b/,w=/\bdgrid-row\b/;i.add("dom-contains",function(){return!!document.createElement("a").contains});return q(null,{pageSkip:10,tabIndex:0,postCreate:function(){function o(c){var i=c.target;return i.type&&(!u[i.type]||32==c.keyCode)}function p(g){function m(a,b,
h){var f=c.cellNavigation?"cell":"row",d=c[f](a);if(a=d&&d.element){b=s.mixin({grid:c},b);if(b.type)b.parentType=b.type;if(!b.bubbles)b.bubbles=!0;n(e,"!dgrid-focus[!tabIndex]");if(e){if(8>i("ie"))e.style.position="";b[f]=c[f](e);k.emit(a,"dgrid-cellfocusout",b)}e=a;b[f]=d;if(!h){if(8>i("ie"))a.style.position="relative";a.tabIndex=c.tabIndex;a.focus()}n(a,".dgrid-focus");k.emit(e,"dgrid-cellfocusin",b)}}for(var l=c.cellNavigation?v:w,e=g,j;(j=e.firstChild)&&!l.test(j.className);)e=j;j&&(e=j);if(g===
c.contentNode)r.after(c,"renderArray",function(a){return t.when(a,function(b){if(l.test(e.className)&&(i("dom-contains")?g.contains(e):g.compareDocumentPosition(e)&8))return b;for(var a=0,f=g.getElementsByTagName("*"),d;d=f[a];++a)if(l.test(d.className)){e=d;break}e.tabIndex=c.tabIndex;return b})});else if(l.test(e.className))e.tabIndex=c.tabIndex;k(g,"mousedown",function(a){o(a)||m(a.target,a)});k(g,"keydown",function(a){if(!a.metaKey&&!a.altKey){var b=a.keyCode;if(!o(a)){var h={32:0,33:-c.pageSkip,
34:c.pageSkip,37:-1,38:-1,39:1,40:1,35:1E4,36:-1E4}[b];if(!isNaN(h)){var f,d=c.cell(e);if(37==b||39==b){if(!c.cellNavigation)return;b="right"}else b="down",f=d&&d.column&&d.column.id,d=c.row(e);h&&(d=d&&c[b](d,h,!0));if(h=d&&d.element){if(f)h=c.cell(h,f).element;if(c.cellNavigation){f=h.getElementsByTagName("input");for(var g,d=0;d<f.length;d++)if(b=f[d],(-1!=b.tabIndex||"lastValue"in b)&&!b.disabled){if(8>i("ie"))b.style.position="relative";b.focus();if(8>i("ie"))b.style.position="";g=!0;break}}m(h,
a,g)}a.preventDefault()}}}});return function(a){a=a||e;m(a,{target:a})}}this.inherited(arguments);var c=this;if(this.tabableHeader)this.focusHeader=p(this.headerNode);this.focus=p(this.contentNode)}})});