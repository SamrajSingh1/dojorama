//>>built
define("dgrid/extensions/ColumnHider",["dojo/_base/declare","dojo/has","dojo/on","put-selector/put","xstyle/css!../css/extensions/ColumnHider.css"],function(m,k,g,e){var i,h,j=k("ie"),l=j&&k("quirks"),n=8>j||l?"htmlFor":"for";return m(null,{hiderMenuNode:null,hiderToggleNode:null,_hiderMenuOpened:!1,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var b=this.subRows,a,c,d,f;for(d=0,a=b.length;d<a;d++)for(f=0,c=b[d].length;f<c;f++)this._renderHiderMenuEntry(b[d][f])},
_renderHiderMenuEntry:function(b){var a=b.id,c,d,f;b.hidden&&(this._columnHiderRules[a]=this.styleColumn(a,"display: none"));if(!b.unhidable&&(c=e("div.dgrid-hider-menu-row"),d=this.domNode.id+"-hider-menu-check-"+a,this._columnHiderCheckboxes[a]=f=e(c,"input#"+d+".dgrid-hider-menu-check.hider-menu-check-"+a+"[type=checkbox]"),e(c,"label.dgrid-hider-menu-label.hider-menu-label"+a+"["+n+"="+d+"]",b.label||b.field||""),e(this.hiderMenuNode,c),!b.hidden))f.checked=!0},renderHeader:function(){var b=this,
a=this.hiderMenuNode,c=this.hiderToggleNode,d;this.inherited(arguments);if(a){for(d in this._columnHiderRules)this._columnHiderRules[d].remove();a.innerHTML=""}else c=this.hiderToggleNode=e(this.headerScrollNode,"div.dgrid-hider-toggle.dgrid-cell-padding","+"),this._listeners.push(g(c,"click",function(a){b._toggleColumnHiderMenu(a)})),a=this.hiderMenuNode=e("div#dgrid-hider-menu-"+this.id+".dgrid-hider-menu"),a.style.display="none",e(this.domNode,a),this._listeners.push(g(a,".dgrid-hider-menu-check:"+
(9>j||l?"click":"change"),function(a){b._updateColumnHiddenState(a.target.id.substr(b.id.length+18),!a.target.checked)})),this._listeners.push(g(a,"mousedown",function(a){a.stopPropagation()})),h||(h=g.pausable(document,"mousedown",function(a){i&&i._toggleColumnHiderMenu(a)}),h.pause());this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},isColumnHidden:function(b){return!!this._columnHiderRules[b]},_toggleColumnHiderMenu:function(){var b=this._hiderMenuOpened,
a=this.hiderMenuNode,c=this.domNode;a.style.display=b?"none":"";if(b)a.style.height="";else if(a.offsetHeight>c.offsetHeight-12)a.style.height=c.offsetHeight-12+"px";h[b?"pause":"resume"]();i=b?null:this;this._hiderMenuOpened=!b},_updateColumnHiddenState:function(b,a){a?this._columnHiderRules[b]=this.styleColumn(b,"display: none;"):(this._columnHiderRules[b].remove(),delete this._columnHiderRules[b]);g.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[b],hidden:a,bubbles:!0});
this.resize()},toggleColumnHiddenState:function(b,a){"undefined"===typeof a&&(a=!this._columnHiderRules[b]);this._updateColumnHiddenState(b,a);this._columnHiderCheckboxes[b].checked=!a}})});