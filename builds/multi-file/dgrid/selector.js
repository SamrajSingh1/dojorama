//>>built
define("dgrid/selector","dojo/_base/kernel dojo/_base/array dojo/on dojo/aspect dojo/_base/sniff put-selector/put".split(" "),function(s,t,w,m,u,n){return function(b,e){function p(g){return function(c){var d=c.rows,h=d.length;c="false";var f;for(f=0;f<h;f++){var e=a.cell(d[f],b.id).element;e&&(e=(e.contents||e).input,e.disabled||(e.checked=g,e.setAttribute("aria-checked",g)))}if("checkbox"==k.type){d=a.selection;h=!1;for(f in d)if(d[f]!=a.allSelected){h=!0;break}k.indeterminate=h;k.checked=a.allSelected;
h?c="mixed":a.allSelected&&(c="true");k.setAttribute("aria-checked",c)}}}function v(b){if("click"==b.type||32==b.keyCode||!u("opera")&&13==b.keyCode||0===b.keyCode){var c=a.row(b),d=a._lastSelected&&a.row(a._lastSelected);a._selectionTriggerEvent=b;if("radio"==e){if(!d||d.id!=c.id)a.clearSelection(),a.select(c,null,!0),a._lastSelected=c.element}else c?(b.shiftKey?p(!0)({rows:[c]}):d=null,d=b.shiftKey?d:null,a.select(d||c,c,d?void 0:null),a._lastSelected=c.element):(n(this,(a.allSelected?"!":".")+
"dgrid-select-all"),a[a.allSelected?"clearSelection":"selectAll"]());a._selectionTriggerEvent=null}}function q(){a._hasSelectorInputListener=!0;l.push(m.before(a,"_initSelectionEvents",function(){this.on(".dgrid-selector:click,.dgrid-selector:keydown",v)}));var g=a._handleSelect;a._handleSelect=function(a){this.cell(a).column!=b&&g.apply(this,arguments)};if("function"==typeof b.disabled){var c=a.allowSelect,d=b.disabled;a.allowSelect=function(a){return c.call(this,a)&&!d.call(b,a.data)}}b.disabled=
function(b){return!a.allowSelect(a.row(b))};l.push(a.on("dgrid-select",p(!0)));l.push(a.on("dgrid-deselect",p(!1)))}var l=[],a,k;b||(b={});b.type&&(b.selectorType=b.type,s.deprecated("columndef.type","use columndef.selectorType instead","dgrid 1.0"));b.selectorType=e=e||b.selectorType||"checkbox";b.sortable=!1;var r="function"==typeof e?e:function(g,c,d){var h=c.parentNode,f;a._hasSelectorInputListener||q();f=b.disabled;n(h&&h.contents?h:c,".dgrid-selector");c=c.input||(c.input=n(c,"input[type\x3d"+
e+"]",{tabIndex:isNaN(b.tabIndex)?-1:b.tabIndex,disabled:f&&("function"==typeof f?f.call(b,d):f),checked:g}));c.setAttribute("aria-checked",!!g);return c};m.after(b,"init",function(){a=b.grid});m.after(b,"destroy",function(){t.forEach(l,function(a){a.remove()});a._hasSelectorInputListener=!1});b.renderCell=function(b,c,d,e,f){c=(c=b&&a.row(b))&&a.selection[c.id];r(c,d,b)};b.renderHeaderCell=function(g){var c=b.label||b.field||"";"radio"==e||!a.allowSelectAll?(g.appendChild(document.createTextNode(c)),
a._hasSelectorInputListener||q()):r(!1,g,{});k=g.lastChild};return b}});