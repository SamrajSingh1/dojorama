//>>built
require({cache:{"dojorama/ui/release/mixin/_ReleaseActionsMixin":function(){define(["dojo/_base/declare","../../_global/widget/ActionsWidget","dojo/i18n!./nls/_ReleaseActionsMixin"],function(b,a,c){return b([],{actionsWidget:null,postCreate:function(){this.inherited(arguments);this.actionsWidget=new a({actions:[{label:c.indexLabel,url:this.router.getRoute("releaseIndex").assemble(),active:"releaseIndex"===this.router.getCurrentRouteName()},{label:c.createLabel,url:this.router.getRoute("releaseCreate").assemble(),
active:"releaseCreate"===this.router.getCurrentRouteName()}]},this.actionsNode)},startup:function(){this.inherited(arguments);this.actionsWidget.startup()},showReleaseActions:function(){this.actionsWidget.show()}})})},"dojorama/ui/release/mixin/_ReleaseBreadcrumbsMixin":function(){define(["dojo/_base/declare","../../_global/widget/BreadcrumbsWidget","dojo/i18n!./nls/_ReleaseBreadcrumbsMixin"],function(b,a,c){return b([],{breadcrumbsWidget:null,breadcrumbsItems:{},postCreate:function(){this.inherited(arguments);
this.breadcrumbsWidget=new a({},this.breadcrumbsNode);this.breadcrumbsItems.home={label:c.homeLabel,url:this.router.getRoute("home").assemble()};this.breadcrumbsItems.releaseIndex={label:c.releaseIndexLabel,url:this.router.getRoute("releaseIndex").assemble()};this.breadcrumbsItems.releaseCreate={label:c.releaseCreateLabel,url:this.router.getRoute("releaseCreate").assemble()}},startup:function(){this.inherited(arguments);this.breadcrumbsWidget.startup()},setReleaseIndexBreadcrumbsItems:function(){this.breadcrumbsWidget.set("items",
[this.breadcrumbsItems.home,this.breadcrumbsItems.releaseIndex])},setReleaseCreateBreadcrumbsItems:function(){this.breadcrumbsWidget.set("items",[this.breadcrumbsItems.home,this.breadcrumbsItems.releaseIndex,this.breadcrumbsItems.releaseCreate])},setReleaseUpdateBreadcrumbsItems:function(a){this.breadcrumbsWidget.set("items",[this.breadcrumbsItems.home,this.breadcrumbsItems.releaseIndex,{label:a}])},showReleaseBreadcrumbs:function(){this.breadcrumbsWidget.show()}})})},"dojorama/ui/release/mixin/_ReleaseComponentTitleMixin":function(){define(["dojo/_base/declare",
"dojo/i18n!./nls/_ReleaseComponentTitleMixin"],function(b,a){return b([],{postCreate:function(){this.inherited(arguments);this.sectionTitleNode.innerHTML=a.sectionTitle}})})},"dojorama/ui/release/widget/ReleaseCreateFormWidget":function(){define("dojo/_base/declare mijit/_WidgetBase mijit/_TemplatedMixin ../../_global/mixin/_ToggleMixin ./snippet/ReleaseFormSnippet dojo/_base/lang dojo/aspect dojo/topic dojo/dom-style dojo/text!./template/ReleaseCreateFormWidget.html dojo/i18n!./nls/ReleaseCreateFormWidget".split(" "),
function(b,a,c,r,g,l,h,s,k,n,q){return b([a,c,r],{store:null,templateString:n,formSnippet:null,constructor:function(a){this.inherited(arguments);this.store=a.store},postCreate:function(){this.titleNode.innerHTML=q.title;var a=this.store.getModelInstance();this.inherited(arguments);this.hide();this.formSnippet=new g({releaseModel:a},this.formNode);this.own(h.after(a,"save",l.hitch(this,function(b){b.then(l.hitch(this,function(){s.publish("ui/release/widget/ReleaseCreateFormWidget/create-ok",{model:a,
notification:{message:q.notificationCreateOk,type:"ok"}})}));return b})))},startup:function(){this.inherited(arguments);this.formSnippet.startup();this.formSnippet.show()}})})},"dojorama/ui/release/widget/snippet/ReleaseFormSnippet":function(){define("dojo/_base/declare mijit/_WidgetBase mijit/_TemplatedMixin ../../../_global/mixin/_ToggleMixin dojo/_base/array dojo/_base/lang dojo/dom-style dojo/keys ../../../_global/widget/ControlGroupWidget dobolo/Button dobolo/DatepickerInput dojo-form-controls/Textbox dojo-form-controls/Textarea dojo-form-controls/Checkbox dojo-form-controls/Select dojo-data-model/sync dojo/text!./template/ReleaseFormSnippet.html dojo/i18n!./nls/ReleaseFormSnippet".split(" "),
function(b,a,c,r,g,l,h,s,k,n,q,t,u,v,e,p,w,d){return b([a,c,r],{releaseModel:null,templateString:w,controlGroupWidgets:{},submitButton:null,submitButtonTimeoutId:null,errorModel:null,postCreate:function(){this.inherited(arguments);this.errorModel=this.releaseModel.getErrorModel();this.hide();this.build()},startup:function(){var a=null;this.inherited(arguments);this.submitButton.startup();for(a in this.releaseModel.getProps())this.releaseModel.getProps().hasOwnProperty(a)&&this.controlGroupWidgets[a]&&
(this.own(p(this.releaseModel,a,this.controlGroupWidgets[a],"value")),this.own(p(this.errorModel,a,this.controlGroupWidgets[a],"error")),this.controlGroupWidgets[a].startup())},destroy:function(){this.inherited(arguments);this.releaseModel.destroy();clearTimeout(this.submitButtonTimeoutId)},_onSubmit:function(a){a.preventDefault();this.submitButton.loading();this.onSubmit()},onSubmit:function(){this.releaseModel.save().then(l.hitch(this,this.cancelSubmitButton),l.hitch(this,this.cancelSubmitButton))},
build:function(){this.controlGroupWidgets.title=new k({label:d.fieldTitleLabel,inputWidget:new t({})},this.titleNode);this.controlGroupWidgets.format=new k({label:d.fieldFormatLabel,inputWidget:new e({options:[{value:"",label:d.fieldFormatOptionLabel},{value:"cd",label:"Cd"},{value:"vinyl",label:"Vinyl"},{value:"digital",label:"Digital",disabled:!0}]})},this.formatNode);this.controlGroupWidgets.releaseDate=new k({label:d.fieldReleaseDateLabel,inputWidget:new q({})},this.releaseDateNode);this.controlGroupWidgets.price=
new k({label:d.fieldPriceLabel,inputWidget:new t({})},this.priceNode);this.controlGroupWidgets.publish=new k({label:d.fieldPublishLabel,inputWidget:new v({}),widgetProperty:"checked"},this.publishNode);this.controlGroupWidgets.info=new k({label:d.fieldInfoLabel,inputWidget:new u({})},this.infoNode);this.submitButton=new n({type:"submit",label:d.submitLabel,loadingText:d.submitBusyLabel,resetText:d.submitLabel,"class":"btn btn-primary"},this.submitNode)},cancelSubmitButton:function(){this.submitButton.reset()}})})},
"dojorama/ui/release/widget/ReleaseGridWidget":function(){define("dojo/_base/declare dojo/_base/lang mijit/_WidgetBase mijit/_TemplatedMixin dojomat/_StateAware dgrid/OnDemandGrid dgrid/Selection dgrid/editor dojo-form-controls/Checkbox dojo-form-controls/Button dojo-form-controls/Textbox dobolo/DatepickerInput dojo-data-model/Observable dojo/dom-construct dojo/dom-style dojo/dom-attr dojo/aspect dojo/topic dojo/on dojo/when dojo/promise/all dojo/text!./template/ReleaseGridWidget.html dojo/i18n!./nls/ReleaseGridWidget".split(" "),
function(b,a,c,r,g,l,h,s,k,n,q,t,u,v,e,p,w,d,x,y,A,B,f){return b([c,r,g],{router:null,store:null,templateString:B,filterInputWidget:null,filterSubmitWidget:null,gridWidget:null,gridSaveButtonWidget:null,gridDeleteButtonWidget:null,constructor:function(a){this.request=a.request;this.router=a.router;this.store=a.store},postCreate:function(){this.inherited(arguments);this.store=u(this.store);this.buildFilterForm();this.gridSaveButtonWidget=this.buildSaveButton();this.gridDeleteButtonWidget=this.buildDeleteButton();
this.gridWidget=this.buildGrid();this.gridWidget.setStore(this.store)},startup:function(){this.filterInputWidget.startup();this.filterSubmitWidget.startup();this.gridSaveButtonWidget.startup();this.gridDeleteButtonWidget.startup()},buildFilterForm:function(){this.filterInputWidget=new q({"class":p.get(this.filterInputNode,"class"),value:this.request.getQueryParam("find")},this.filterInputNode);this.filterSubmitWidget=new n({type:"submit","class":p.get(this.filterSubmitNode,"class"),label:f.filterSubmitLabel},
this.filterSubmitNode);this.own(x(this.filterFormNode,"submit",a.hitch(this,function(a){a.preventDefault();this.push(this.router.getRoute("releaseIndex").assemble(null,{find:this.filterInputWidget.value}))})))},buildGrid:function(){var c={selector:{label:" ",sortable:!1,renderCell:a.hitch(this,function(z,b,c,e){b=v.create("input",{type:"checkbox"},c,"last");this.own(x(b,"change",a.hitch(this,function(a){a=this.gridWidget.row(z);this.gridWidget.isSelected(z.get("id"))?this.gridWidget.deselect(a):this.gridWidget.select(a)})))})},
title:{label:f.gridColumnLabelTitle,field:"title",sortable:!0,renderCell:a.hitch(this,function(b,c,e,d){b=v.create("a",{href:this.router.getRoute("releaseUpdate").assemble({id:b.get("id")}),innerHTML:b.get("title")},e,"last");this.own(x(b,"click",a.hitch(this,function(a){a.preventDefault();this.push(a.target.href)})))})},releaseDate:s({label:f.gridColumnLabelReleaseDate,field:"releaseDate",sortable:!0,autoSave:!1,editorArgs:{required:!0,"class":"span3",format:"medium"}},t),publish:s({label:f.gridColumnLabelPublish,
field:"publish",sortable:!0,autoSave:!1,editorArgs:{value:"on"}},k)},m=new (b([l,h]))({getBeforePut:!0,columns:c,selectionMode:"none",queryOptions:{sort:[{attribute:"title",descending:!1}]},loadingMessage:f.gridLoadingState,noDataMessage:f.gridNoDataAvailable},this.gridNode),g=function(){var a=0,b;for(b in m.selection)m.selection.hasOwnProperty(b)&&(a+=1);return a};this.request.getQueryParam("find")&&m.set("query",{title:this.request.getQueryParam("find")});m.on("dgrid-error",function(a){d.publish("ui/release/widget/ReleaseGridWidget/unknown-error",
{notification:{message:f.notificationUnknownError,type:"error"}})});m.on(".dgrid-header .dgrid-column-title:click",a.hitch(this,function(a){}));m.on(".dgrid-row .dgrid-column-title:click",a.hitch(this,function(a){}));m.on("dgrid-select",a.hitch(this,function(a){e.set(this.gridDeleteButtonWidget.domNode,"display","inline")}));m.on("dgrid-deselect",a.hitch(this,function(a){e.set(this.gridDeleteButtonWidget.domNode,"display",g()?"inline":"none")}));m.on("dgrid-datachange",a.hitch(this,function(a){e.set(this.gridSaveButtonWidget.domNode,
"display","inline")}));var p=w.after(this.store,"query",a.hitch(this,function(b){y(b,a.hitch(this,function(a){a.length&&(e.set(this.mainNode,"display","block"),p.remove())}));return b}));return m},buildSaveButton:function(){var b=function(){d.publish("ui/release/widget/ReleaseGridWidget/update-ok",{notification:{message:f.notificationUpdateOk,type:"ok"}})},c=function(a){d.publish("ui/release/widget/ReleaseGridWidget/update-error",{notification:{message:f.notificationUpdateError,type:"error"}})};return new n({style:"display: none",
"class":p.get(this.gridSaveButtonNode,"class"),label:f.gridSaveButtonLabel,onClick:a.hitch(this,function(){y(this.gridWidget.save(),b,c)})},this.gridSaveButtonNode)},buildDeleteButton:function(){var b=function(a){d.publish("ui/release/widget/ReleaseGridWidget/delete-ok",{notification:{message:f.notificationDeleteOk,type:"ok"}})},c=function(a){d.publish("ui/release/widget/ReleaseGridWidget/delete-error",{notification:{message:f.notificationDeleteError,type:"error"}})};return new n({style:"display: none",
"class":p.get(this.gridDeleteButtonNode,"class"),label:f.gridDeleteButtonLabel,onClick:a.hitch(this,function(){var a=[],e;for(e in this.gridWidget.selection)this.gridWidget.selection.hasOwnProperty(e)&&a.push(this.store.remove(e));y(A(a),b,c)})},this.gridDeleteButtonNode)}})})},"dojorama/ui/release/widget/ReleaseUpdateFormWidget":function(){define("dojo/_base/declare mijit/_WidgetBase mijit/_TemplatedMixin ../../_global/mixin/_ToggleMixin dojo/_base/lang dojo/aspect dojo/topic dojo/when dojo/dom-style ../../_global/widget/ProgressWidget ./snippet/ReleaseFormSnippet dojo/text!./template/ReleaseUpdateFormWidget.html dojo/i18n!./nls/ReleaseUpdateFormWidget".split(" "),
function(b,a,c,r,g,l,h,s,k,n,q,t,u){return b([a,c,r],{store:null,releaseId:null,templateString:t,formSnippet:null,progressWidget:null,constructor:function(a){this.releaseId=a.releaseId},postscript:function(a){this.inherited(arguments);this.store=a.store},postCreate:function(){this.inherited(arguments);this.hide();this.progressWidget=new n({},this.progressNode)},startup:function(){this.inherited(arguments);this.progressWidget.startup();this.progressWidget.show();var a=this.store.get(this.releaseId);
s(a,g.hitch(this,function(a){a?(this.progressWidget.hide(),k.set(this.mainNode,"display","block"),this.formSnippet=new q({releaseModel:a},this.formNode),this.own(l.before(this.formSnippet,"onSubmit",g.hitch(this,function(){h.publish("ui/release/widget/ReleaseUpdateFormWidget/submit",{})}))),this.own(l.after(a,"save",g.hitch(this,function(b){b.then(g.hitch(this,function(){this.titleNode.innerHTML=a.get("title");h.publish("ui/release/widget/ReleaseUpdateFormWidget/update-ok",{model:a,notification:{message:u.notificationUpdateOk,
type:"ok"}})}));return b}))),this.titleNode.innerHTML=a.get("title"),this.formSnippet.startup(),this.formSnippet.show(),h.publish("ui/release/widget/ReleaseUpdateFormWidget/load-ok",a)):h.publish("ui/release/widget/ReleaseUpdateFormWidget/load-not-found",{})}),g.hitch(this,function(a){404===a.response.status?h.publish("ui/release/widget/ReleaseUpdateFormWidget/load-not-found",{}):h.publish("ui/release/widget/ReleaseUpdateFormWidget/load-error",{})}))}})})},"url:dojorama/ui/release/widget/snippet/template/ReleaseFormSnippet.html":'\x3cform class\x3d"form-horizontal" data-dojo-attach-event\x3d"onsubmit:_onSubmit"\x3e\n    \x3cfieldset\x3e\n        \x3cdiv data-dojo-attach-point\x3d"titleNode"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"formatNode"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"releaseDateNode"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"priceNode"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"infoNode"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"publishNode"\x3e\x3c/div\x3e\n        \x3cbutton data-dojo-attach-point\x3d"submitNode"\x3eSave\x3c/button\x3e\n    \x3c/fieldset\x3e\n\x3c/form\x3e',
"url:dojorama/ui/release/widget/template/ReleaseCreateFormWidget.html":'\x3cdiv\x3e\n    \x3ch2 data-dojo-attach-point\x3d"titleNode"\x3e\x3c/h2\x3e\x3chr /\x3e\n    \x3cdiv data-dojo-attach-point\x3d"formNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:dojorama/ui/release/widget/template/ReleaseGridWidget.html":'\x3cdiv\x3e\n    \x3cdiv class\x3d"clearfix"\x3e\n        \x3cform class\x3d"form-search pull-right" data-dojo-attach-point\x3d"filterFormNode"\x3e\n            \x3cdiv class\x3d"input-append"\x3e\n                \x3cinput data-dojo-attach-point\x3d"filterInputNode" class\x3d"search-query" /\x3e\n                \x3cbutton data-dojo-attach-point\x3d"filterSubmitNode" class\x3d"btn"\x3e\x3c/button\x3e\n            \x3c/div\x3e\n        \x3c/form\x3e\n    \x3c/div\x3e\n    \n    \x3cdiv data-dojo-attach-point\x3d"mainNode" style\x3d"display:none"\x3e\n        \x3cdiv data-dojo-attach-point\x3d"gridNode"\x3e\x3c/div\x3e\n    \n        \x3cdiv class\x3d"btn-toolbar"\x3e\n            \x3cbutton data-dojo-attach-point\x3d"gridSaveButtonNode" class\x3d"btn"\x3e\x3c/button\x3e\n            \x3cbutton data-dojo-attach-point\x3d"gridDeleteButtonNode" class\x3d"btn btn-danger"\x3e\x3c/button\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:dojorama/ui/release/widget/template/ReleaseUpdateFormWidget.html":'\x3cdiv\x3e\n    \x3cdiv data-dojo-attach-point\x3d"progressNode"\x3e\x3c/div\x3e\n    \n    \x3cdiv data-dojo-attach-point\x3d"mainNode" style\x3d"display:none"\x3e\n        \x3ch2 data-dojo-attach-point\x3d"titleNode"\x3e\x3c/h2\x3e\x3chr /\x3e\n        \x3cdiv data-dojo-attach-point\x3d"formNode"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',"*now":function(b){b(['dojo/i18n!*preload*dojorama/layers/nls/release-widgets*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
define("dojorama/layers/release-widgets",[],1);
//@ sourceMappingURL=release-widgets.js.map