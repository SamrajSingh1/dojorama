//>>built
require({cache:{"put-selector/put":function(){(function(x){var h,c=/[-+,> ]/;x("put-selector/put",[],h=function(m,n){function s(f){function d(){a&&(l&&a!=l)&&(l==f&&(k||(k=c.test(t)&&m.createDocumentFragment()))||l).insertBefore(a,n||null)}for(var k,r,n,l,a,y=arguments,g=y[0],A=0;A<y.length;A++){var t=y[A];if("object"==typeof t){r=!1;if(t instanceof Array){a=m.createDocumentFragment();for(var u=0;u<t.length;u++)a.appendChild(s(t[u]));t=a}if(t.nodeType)a=t,d(),l=t,n=0;else for(u in t)a[u]=t[u]}else if(r)r=
!1,a.appendChild(m.createTextNode(t));else{1>A&&(f=null);r=!0;if(g=t.replace(v,function(g,p,u,c,k,r){p&&(d(),"-"==p||"+"==p?(l=(n=a||l).parentNode,a=null,"+"==p&&(n=n.nextSibling)):("\x3c"==p?l=a=(a||l).parentNode:(","==p?l=f:a&&(l=a),a=null),n=0),a&&(l=a));if((g=!u&&c)||!a&&(u||k))"$"==g?(g=y[++A],l.appendChild(m.createTextNode(g))):(g=g||s.defaultTag,(p=b&&y[A+1]&&y[A+1].name)&&(g="\x3c"+g+' name\x3d"'+p+'"\x3e'),a=q&&~(e=g.indexOf("|"))?m.createElementNS(q[g.slice(0,e)],g.slice(e+1)):m.createElement(g));
if(u)if("$"==c&&(c=y[++A]),"#"==u)a.id=c;else if(p=(g=a.className)&&(" "+g+" ").replace(" "+c+" "," "),"."==u)a.className=g?(p+c).substring(1):c;else if("!"==t){var h;b?s("div",a,"\x3c").innerHTML="":(h=a.parentNode)&&h.removeChild(a)}else p=p.substring(1,p.length-1),p!=g&&(a.className=p);k&&("$"==r&&(r=y[++A]),"style"==k?a.style.cssText=r:(u="!"==k.charAt(0)?(k=k.substring(1))&&"removeAttribute":"setAttribute",r=""===r?k:r,q&&~(e=k.indexOf("|"))?a[u+"NS"](q[k.slice(0,e)],k.slice(e+1),r):a[u](k,r)));
return""}))throw new SyntaxError("Unexpected char "+g+" in "+t);d();l=g=a||l}}f&&k&&f.appendChild(k);return g}c=n||c;var v=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,e,q=!1;m=m||document;var b="object"==typeof m.createElement;s.addNamespace=function(b,d){m.createElementNS?(q||(q={}))[b]=d:m.namespaces.add(b,d)};s.defaultTag="div";s.forDocument=h;return s})})(function(x,h,c){c=c||h;"function"===typeof define?define([],function(){return c()}):"undefined"==
typeof window?require("./node-html")(module,c):put=c()})},"xstyle/has-class":function(){define("xstyle/has-class",["dojo/has"],function(x){var h={};return function(){for(var c,m=arguments,n=0;n<m.length;n++)if(c=m[n],!h[c]){h[c]=!0;var s=c.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),v=x(s[2]),e=-s[4];if((0<e?e<=v&&(-s[5]||e)>=v:!!v)==!s[1])document.documentElement.className+=" has-"+c}}})},"xstyle/css":function(){define("xstyle/css",["require"],function(x){function h(c,m,n){var h=document.documentElement;
c=h.insertBefore(document.createElement(c),h.firstChild);c.id=m;m=(c.currentStyle||getComputedStyle(c,null))[n];h.removeChild(c);return m}return{load:function(c,m,n,s){function v(){var b=h("x-parse",null,"content");b&&"none"!=b?m([eval(b)],n):n()}var e=m.toUrl(c),q=m.cache["url:"+e];if(q)return q.xCss&&(q=q.cssText),x(["./util/createStyleSheet"],function(b){b(q)}),v();if("none"==h("div",c.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display"))return v();x(["./load-css"],function(b){b(e,v)})}}})},
"dgrid/List":function(){define("dgrid/List","dojo/_base/kernel dojo/_base/declare dojo/on dojo/has ./util/misc dojo/has!touch?./TouchScroll xstyle/has-class put-selector/put dojo/_base/sniff xstyle/css!./css/dgrid.css".split(" "),function(x,h,c,m,n,s,v,e){function q(a,b){var g=document.body,d;e(g,a,".dgrid-scrollbar-measure");d=a["offset"+b]-a["client"+b];e(a,"!dgrid-scrollbar-measure");g.removeChild(a);return d}function b(a){var b=a?"."+a.replace(G,"."):"";this._class&&(b="!"+this._class.replace(G,
"!")+b);e(this.domNode,b);this._class=a}function f(){return this._class}v("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var d,k;m.add("dom-scrollbar-width",function(a,b,g){return q(g,"Width")});m.add("dom-scrollbar-height",function(a,b,g){return q(g,"Height")});var r=0,G=/ +/g,l=7>m("ie")&&!m("quirks")?function(){var a,b,g;if(this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,g=this._prevWinDims||[],g[0]!==b||g[1]!==a))this.resize(),this._prevWinDims=
[b,a]}:function(){this._started&&this.resize()};return h(s?s:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,postscript:function(a,b){var g=this;(this._Row=function(a,b,g){this.id=a;this.data=b;this.element=g}).prototype.remove=function(){g.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(a,b)},listType:"list",create:function(a,y){var g=this.domNode=y||e("div"),d;a?(this.params=a,h.safeMixin(this,a),d=a["class"]||
a.className||g.className,this._sort=a.sort||[],delete this.sort):this._sort=[];this.observers=[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=g.id=g.id||this.id||"dgrid_"+r++;this.buildRendering();d&&b.call(this,d);this.postCreate&&this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this,g,d,f,u;u=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||
document.body.style.direction).toLowerCase();a.className="";e(a,"[role\x3dgrid].ui-widget.dgrid.dgrid-"+this.listType);g=this.headerNode=e(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));(m("quirks")||8>m("ie"))&&e(a,"div.dgrid-spacer");d=this.bodyNode=e(a,"div.dgrid-scroller");d.tabIndex=-1;this.headerScrollNode=e(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");f=this.footerNode=e("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));
e(a,f);u&&(a.className+=" dgrid-rtl"+(m("webkit")?"":" dgrid-rtl-nonwebkit"));c(d,"scroll",function(f){b.showHeader&&(g.scrollLeft=f.scrollLeft||d.scrollLeft);f.stopPropagation();c.emit(a,"scroll",{scrollTarget:d})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=e(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=c(window,"resize",n.throttleDelayed(l,this)))},startup:function(){this._started||(this.inherited(arguments),this._started=
!0,this.resize(),this.set("sort",this._sort))},configStructure:function(){},resize:function(){var a=this.bodyNode,b=this.headerNode,g=this.footerNode,f=b.offsetHeight,c=this.showFooter?g.offsetHeight:0,u=m("quirks")||7>m("ie");this.headerScrollNode.style.height=a.style.marginTop=f+"px";a.style.marginBottom=c+"px";u&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-f-c,0)+"px",c&&(g.style.bottom="1px",setTimeout(function(){g.style.bottom=""},0)));d||(d=m("dom-scrollbar-width"),
k=m("dom-scrollbar-height"),m("ie")&&(d++,k++),n.addCssRule(".dgrid-scrollbar-width","width: "+d+"px"),n.addCssRule(".dgrid-scrollbar-height","height: "+k+"px"),17!=d&&!u&&(n.addCssRule(".dgrid-header","right: "+d+"px"),n.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+d+"px")));u&&(b.style.width=a.clientWidth+"px",setTimeout(function(){b.scrollLeft=a.scrollLeft},0))},addCssRule:function(a,b){var g=n.addCssRule(a,b);this.cleanAddedRules&&this._listeners.push(g);return g},on:function(a,b){var g=
c(this.domNode,a,b);m("dom-addeventlistener")||this._listeners.push(g);return g},cleanup:function(){var a=this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var g=document.getElementById(b);g&&this.removeRow(g,!0)}for(b=0;b<a.length;b++)(g=a[b])&&g.cancel();this.observers=[];this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this.cleanup();e(this.domNode,"!")},refresh:function(){this.cleanup();
this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,g,d,f){if(b){var c=this.insertRow(a,b,g,d,f);e(c,".ui-state-highlight");setTimeout(function(){e(c,"!ui-state-highlight")},250);return c}},adjustRowIndices:function(a){if(this.maintainOddEven){var b=a.rowIndex;if(-1<b){do-1<a.rowIndex&&(-1<(a.className+" ").indexOf("dgrid-row ")&&e(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=
b++);while((a=a.nextSibling)&&a.rowIndex!=b&&!a.blockRowIndex)}}},renderArray:function(a,b,g){function d(a){s=c.insertRow(a,r,null,k++,g);s.observerIndex=m;return s}function f(a){if(l=b?b.parentNode:c.contentNode)l.insertBefore(r,b||null),(s=a[a.length-1])&&c.adjustRowIndices(s);return q=a}g=g||{};var c=this,k=g.start||0,e,q,l;b||(this._lastCollection=a);if(a.observe)var m=this.observers.push(a.observe(function(a,d,f){var k,t,r;-1<d&&q[d]&&(e=q.splice(d,1)[0],e.parentNode==l&&((k=e.nextSibling)&&
d!=f&&k.rowIndex--,c.removeRow(e)),c._processScroll&&c._processScroll());if(-1<f){t=q[f];if(!t&&(t=q[f-1]))t=(t.connected||t).nextSibling;r=b&&b.parentNode||t&&t.parentNode||c.contentNode;if(e=c.newRow(a,r,t,g.start+f,g))if(e.observerIndex=m,q.splice(f,0,e),!k||f<d)k=e.previousSibling,k=!k||k.rowIndex+1==e.rowIndex||0==e.rowIndex?e:k;g.count++}d!=f&&k&&c.adjustRowIndices(k);c._onNotification(q,a,d,f)},!0))-1;var r=document.createDocumentFragment();if(a.map){if(q=a.map(d,console.error),q.then)return q.then(f)}else{q=
[];for(var n=0,h=a.length;n<h;n++)q[n]=d(a[n])}var s;return f(q)},_onNotification:function(a,b,d,f){},renderHeader:function(){},_autoId:0,insertRow:function(a,b,d,f,c){var k=c.parentId,k=this.id+"-row-"+(k?k+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),e=document.getElementById(k),q=e&&e.previousSibling;e&&this.removeRow(e);e=this.renderRow(a,c);e.className=(e.className||"")+" ui-state-default dgrid-row "+(1==f%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[e.id=
k]=a;b.insertBefore(e,d||null);q&&this.adjustRowIndices(q);e.rowIndex=f;return e},renderRow:function(a,b){return e("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||e(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;a.target&&a.target.nodeType&&(a=a.target);if(a.nodeType){do{var d=a.id;if(b=this._rowIdToObject[d])return new this._Row(d.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):
(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,d,f){var e,c;c=e=a.element;b=b||1;do if(a=e[0>b?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+" ").indexOf(d+" ")){c=e;b+=0>b?1:-1;break}while(a=(!f||!e.hidden)&&e[0>b?"lastChild":"firstChild"])}else if(e=e.parentNode,e===this.bodyNode||e===this.headerNode)break;while(b);return c},up:function(a,b,d){a.element||(a=
this.row(a));return this.row(this._move(a,-(b||1),"dgrid-row",d))},down:function(a,b,d){a.element||(a=this.row(a));return this.row(this._move(a,b||1,"dgrid-row",d))},scrollTo:m("touch")?function(){return this.inherited(arguments)}:function(a){"undefined"!==typeof a.x&&(this.bodyNode.scrollLeft=a.x);"undefined"!==typeof a.y&&(this.bodyNode.scrollTop=a.y)},getScrollPosition:m("touch")?function(){return this.inherited(arguments)}:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},
get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var d in a)this.set(d,a[d]);else d="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[d]?this[d].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:f,_setClass:b,_getClassName:f,_setClassName:b,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,
descending:b}];this.refresh();this._lastCollection&&(a.length&&("string"!=typeof a&&(b=a[0].descending,a=a[0].attribute),this._lastCollection.sort(function(d,f){var e=d[a],c=f[a];void 0===e&&(e="");void 0===c&&(c="");return e==c?0:e>c==!b?1:-1})),this.renderArray(this._lastCollection))},sort:function(a,b){x.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 1.0");this.set("sort",a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=
a;e(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();a&&(b.scrollLeft=this.getScrollPosition().x)},setShowHeader:function(a){x.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 1.0");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;e(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define("dgrid/util/misc",["put-selector/put"],function(x){var h=[],c,m,n,s=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,
v={defaultDelay:15,throttle:function(e,c,b){var f=!1;b=b||v.defaultDelay;return function(){f||(f=!0,e.apply(c,arguments),setTimeout(function(){f=!1},b))}},throttleDelayed:function(e,c,b){var f=!1;b=b||v.defaultDelay;return function(){if(!f){f=!0;var d=arguments;setTimeout(function(){f=!1;e.apply(c,d)},b)}}},debounce:function(e,c,b){var f;b=b||v.defaultDelay;return function(){f&&(clearTimeout(f),f=null);var d=arguments;f=setTimeout(function(){e.apply(c,d)},b)}},addCssRule:function(e,q){c||(c=x(document.getElementsByTagName("head")[0],
"style"),c=c.sheet||c.styleSheet,m=c.deleteRule?"deleteRule":"removeRule",n=c.cssRules?"cssRules":"rules");var b=h.length;h[b]=(c.cssRules||c.rules).length;c.addRule?c.addRule(e,q):c.insertRule(e+"{"+q+"}",h[b]);return{get:function(f){return c[n][h[b]].style[f]},set:function(f,d){"undefined"!==typeof h[b]&&(c[n][h[b]].style[f]=d)},remove:function(){var f=h[b],d,e;if(void 0!==f){c[m](f);h[b]=void 0;d=b+1;for(e=h.length;d<e;d++)h[d]>f&&h[d]--}}}},escapeCssIdentifier:function(e){return e.replace(s,"\\$1")}};
return v})},"dgrid/OnDemandList":function(){define("dgrid/OnDemandList","./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on ./util/misc put-selector/put".split(" "),function(x,h,c,m,n,s,v,e){return c([x,h],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:1,pagingMethod:"debounce",pagingDelay:v.defaultDelay,keepScrollPosition:!1,rowHeight:22,postCreate:function(){this.inherited(arguments);var e=this;s(this.bodyNode,
"scroll",v[this.pagingMethod](function(b){e._processScroll(b)},null,this.pagingDelay))},renderQuery:function(c,b,f){function d(a){e(s,"!");if(a)throw k._refreshDeferred&&(k._refreshDeferred.reject(a),delete k._refreshDeferred),a;}var k=this,r={query:c,count:0,node:b,options:f},h=this.preload,l;if(!b){var a={node:e(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:c,next:r,options:f};a.node.style.height="0";r.node=b=e(this.contentNode,"div.dgrid-preload");r.previous=a}b.rowIndex=this.minRowsPerPage;
h?((r.next=h.next)&&this.bodyNode.scrollTop>=h.node.offsetTop?r.previous=h:(r.next=h,r.previous=h.previous),r.previous.next=r,r.next.previous=r):this.preload=r;var s=e(b,"-div.dgrid-loading");e(s,"div.dgrid-below").innerHTML=this.loadingMessage;f=m.mixin(this.get("queryOptions"),f,{start:0,count:this.minRowsPerPage,query:c});this._trackError(function(){return l=c(f)});if("undefined"===typeof l)d();else return n.when(k.renderArray(l,b,f),function(a){return n.when(l.total||l.length,function(d){e(s,
"!");var f=a.length;0===d&&(k.noDataNode=e(k.contentNode,"div.dgrid-no-data"),k.noDataNode.innerHTML=k.noDataMessage);for(var c=0,q=0;q<f;q++)c+=k._calcRowHeight(a[q]);f&&c&&(k.rowHeight=c/f);d-=f;r.count=d;b.rowIndex=f;d?b.style.height=Math.min(d*k.rowHeight,k.maxEmptySpace)+"px":b.style.display="none";k._previousScrollPosition&&(k.scrollTo(k._previousScrollPosition),delete k._previousScrollPosition);k._processScroll();k._refreshDeferred&&(k._refreshDeferred.resolve(l),delete k._refreshDeferred);
return a},d)},d),l},refresh:function(c){var b=this,f=c&&c.keepScrollPosition,d;"undefined"===typeof f&&(f=this.keepScrollPosition);f&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this.store)return f=this._refreshDeferred=new n,d=b.renderQuery(function(d){return b.store.query(b.query,d)}),"undefined"===typeof d&&f.reject(),f.then(function(d){setTimeout(function(){s.emit(b.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:b,results:d})},0);delete b._refreshDeferred;
return d},function(d){delete b._refreshDeferred;throw d;})},resize:function(){this.inherited(arguments);this._processScroll()},_calcRowHeight:function(c){var b=c.previousSibling;return b&&b.offsetTop!=c.offsetTop?c.offsetHeight:0},lastScrollTop:0,_processScroll:function(c){function b(a,b,c,g){var k=d.farOffRemoval,l=a.node;if(b>2*k){for(var m,h=l[c],r=0,p=0,n=[];m=h;){var q=d._calcRowHeight(m);if(r+q+k>b||0>h.className.indexOf("dgrid-row")&&0>h.className.indexOf("dgrid-loading"))break;var h=m[c],
s,t=m.observerIndex;if(t!=s&&-1<s){var u=d.observers,v=u[s];v&&v.cancel();u[s]=0}r+=q;p+=m.count||1;s=t;d.removeRow(m,!0);n.push(m)}a.count+=p;g?(l.rowIndex-=p,f(a)):l.style.height=l.offsetHeight+r+"px";var w=e("div",n);setTimeout(function(){e(w,"!")},1)}}function f(a,b){a.node.style.height=Math.min(a.count*d.rowHeight,b?Infinity:d.maxEmptySpace)+"px"}var d=this,k=d.bodyNode;c=c&&c.scrollTop||this.getScrollPosition().y;var r=k.offsetHeight+c,h,l,a=d.preload,s=d.lastScrollTop,g=d.bufferRows*d.rowHeight,
v=g-d.rowHeight,t,u,x;for(d.lastScrollTop=c;a&&!a.node.offsetWidth;)a=a.previous;for(;a&&a!=h;){h=d.preload;d.preload=a;l=a.node;var p=l.offsetTop;if(r+1+v<p){do a=a.previous;while(a&&!a.node.offsetWidth)}else if(c-1-v>p+l.offsetHeight){do a=a.next;while(a&&!a.node.offsetWidth)}else{var w=((l.rowIndex?c-g:r)-p)/d.rowHeight,p=(r-c+2*g)/d.rowHeight,D=Math.max(Math.min((c-s)*d.rowHeight,d.maxRowsPerPage/2),d.maxRowsPerPage/-2),p=p+Math.min(Math.abs(D),10);0==l.rowIndex&&(w-=p);w=Math.max(w,0);10>w&&
(0<w&&p+w<d.maxRowsPerPage)&&(p+=Math.max(0,w),w=0);p=Math.min(Math.max(p,d.minRowsPerPage),d.maxRowsPerPage,a.count);if(0==p)return;var p=Math.ceil(p),w=Math.min(Math.floor(w),a.count-p),B=m.mixin(d.get("queryOptions"),a.options);a.count-=p;var z=l,E,F=d.queryRowsOverlap;if(D=0<l.rowIndex&&a){var C=a.previous;C&&(b(C,c-(C.node.offsetTop+C.node.offsetHeight),"nextSibling"),0<w&&C.node==l.previousSibling?(w=Math.min(a.count,w),a.previous.count+=w,f(a.previous,!0),l.rowIndex+=w,F=0):p+=w,a.count-=w);
B.start=l.rowIndex-F;l.rowIndex+=p}else a.next&&(b(a.next,a.next.node.offsetTop-r,"previousSibling",!0),z=l.nextSibling,z==a.next.node?(a.next.count+=a.count-w,a.next.node.rowIndex=w+p,f(a.next),a.count=w,F=0):E=!0),B.start=a.count;B.count=Math.min(p+F,d.maxRowsPerPage);E&&(z&&z.offsetWidth)&&(E=z.offsetTop);f(a);l=e(z,"-div.dgrid-loading[style\x3dheight:"+p*d.rowHeight+"px]");e(l,"div.dgrid-"+(D?"below":"above")).innerHTML=d.loadingMessage;l.count=p;l.blockRowIndex=!0;B.query=a.query;var H=a.query(B);
if(void 0===d._trackError(function(){return H})){e(l,"!");return}(function(a,b,c,g,k){x=n.when(d.renderArray(k,a,B),function(b){u=k;z=a.nextSibling;e(a,"!");if(g&&z&&z.offsetWidth){var l=d.getScrollPosition();d.scrollTo({x:l.x,y:l.y+z.offsetTop-g,preserveMomentum:!0})}c&&n.when(k.total||k.length,function(a){c.count=a-c.node.rowIndex;f(c)});d._processScroll();return b},function(b){e(a,"!");throw b;})}).call(this,l,k,D,E,H);a=a.previous}}if(x&&(t=this._refreshDeferred))delete this._refreshDeferred,
n.when(x,function(){t.resolve(u)})}})})},"dgrid/_StoreMixin":function(){define("dgrid/_StoreMixin","dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/aspect put-selector/put".split(" "),function(x,h,c,m,n,s,v){function e(b){return b}function q(b){"object"!==typeof b&&(b=Error(b));b.grid=this;n.emit(this.domNode,"dgrid-error",{grid:this,error:b,cancelable:!0,bubbles:!0})&&console.error(b)}return h(null,{store:null,query:null,queryOptions:null,getBeforePut:!0,noDataMessage:"",
loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};s.before(this,"configStructure",c.hitch(this,function(){this._columnsWithSet={}}))},_configColumn:function(b){b.set&&(this._columnsWithSet[b.field]=b)},_setStore:function(b,c,d){this.store=b;this.dirty={};this.set("query",c,d)},_setQuery:function(b,c){var d=c&&c.sort;this.query=void 0!==b?b:this.query;this.queryOptions=c||this.queryOptions;d?this.set("sort",d):this.refresh()},
setStore:function(b,c,d){x.deprecated("setStore(...)",'use set("store", ...) instead',"dgrid 1.0");this.set("store",b,c,d)},setQuery:function(b,c){x.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 1.0");this.set("query",b,c)},_getQueryOptions:function(){var b=c.delegate(this.queryOptions,{});this._sort.length&&(b.sort=this._sort);return b},_getQuery:function(){var b=this.query;return"object"==typeof b&&null!=b?c.delegate(b,{}):b},_setSort:function(b,c){this.store&&(this._lastCollection=
null);this.inherited(arguments)},insertRow:function(b,e,d,k,m){var h=this.store,l=this.dirty,h=h&&h.getIdentity(b),a;h in l&&!(h in this._updating)&&(a=l[h]);a&&(b=c.delegate(b,a));return this.inherited(arguments)},updateDirty:function(b,c,d){var e=this.dirty,h=e[b];h||(h=e[b]={});h[c]=d},setDirty:function(b,c,d){x.deprecated("setDirty(...)","use updateDirty() instead","dgrid 1.0");this.updateDirty(b,c,d)},save:function(){function b(a,b){return function(h){var l=c._columnsWithSet,n=c._updating,p,
q;for(p in b)h[p]=b[p];for(p in l)q=l[p].set(h),void 0!==q&&(h[p]=q);n[a]=!0;return m.when(d.put(h),function(){delete e[a];delete n[a]})}}var c=this,d=this.store,e=this.dirty,h=new m,n=h.promise,l=function(a){var b;return c.getBeforePut||!(b=c.row(a).data)?function(){return d.get(a)}:function(){return b}},a;for(a in e)var q=b(a,e[a]),n=n.then(l(a)).then(q);h.resolve();return n},revert:function(){this.dirty={};this.refresh()},_trackError:function(b){var f;"string"==typeof b&&(b=c.hitch(this,b));try{f=
b()}catch(d){q.call(this,d)}return m.when(f,e,c.hitch(this,q))},newRow:function(){this.noDataNode&&(v(this.noDataNode,"!"),delete this.noDataNode);return this.inherited(arguments)},removeRow:function(b,c){var d={element:b};!c&&(this.noDataMessage&&this.up(d).element===b&&this.down(d).element===b)&&(this.noDataNode=v(this.contentNode,"div.dgrid-no-data"),this.noDataNode.innerHTML=this.noDataMessage);return this.inherited(arguments)}})})}}});define("dojorama/layers/dgrid-common",[],1);
//@ sourceMappingURL=dgrid-common.js.map