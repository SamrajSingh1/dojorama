//>>built
define("xstyle/core/generate",["xstyle/core/elemental","put-selector/put","xstyle/core/utils","xstyle/core/expression"],function(u,k,B,C){function D(b,k,m,h){b&&b.receive?b.receive(k,m,h):k(b)}var r=0,E={TABLE:"tr",TBODY:"tr",TR:"td",UL:"li",OL:"li",SELECT:"option"},F={INPUT:1,TEXTAREA:1,SELECT:1},h=document;return function(b,v){r++;b=b.sort?b:[b];return function(m,w,p){var f=m;if(void 0===p){var g=m.childNodes,l=g[0],s;if(l){s=h.createDocumentFragment();do s.appendChild(l);while(l=g[0])}}m.content=
s;for(var x=0,y=[m],g=0,l=b.length;g<l;g++){var z=a,a=b[g];try{if(a.eachProperty)if(a.args)if("("==a.operator){var n=b[g+1];n&&n.eachProperty&&k(f,n.selector);var A=a.args.toString(),r=C(a.parent,0,A);(function(a,b){B.when(r,function(c){c.forElement&&(c=c.forElement(a));var e=a.appendChild(h.createTextNode("Loading"));D(c,function(d){if(d&&d.sort){e&&(e.parentNode.removeChild(e),e=null);var f=b&&b.eachProperty&&b.each,f=f?generate(f,b):function(a,c,b){return k(b||a,(b?"-":"")+(E[a.tagName]||"span"),
c)},g=d.map(function(b){return f(a,b,null)});d.observe&&d.observe(function(b,c,d){if(-1<c){var e=g[c];e.parentNode.removeChild(e);g.splice(c,1)}-1<d&&g.splice(d,0,f(a,b,g[d]||null))},!0)}else d&&d.nodeType?(e&&(e.parentNode.removeChild(e),e=null),a.appendChild(d)):(d=void 0===d?"":d,a.tagName in F?(a.value=d,a["-x-variable"]=c):e.nodeValue=d)},v,A)})})(f,n)}else k(f,a.toString());else k(f,a.selector),u.update(f,a.selector);else if("string"==typeof a){"\x3d"==a.charAt(0)&&(a=a.slice(1));var c=f,n=
b[g+1];a.replace(/([,\n]+)?([\t ]+)?(\.|#)?([-\w%$|\.\#]+)(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,function(a,b,g,e,d,h,l){g&&b&&(a=g.length,console.log(a,d),a>x?y[a]=c:c=y[a]||c,x=a);var q;e?q=(z&&z.args?"":"span")+e+d:(e=v.getDefinition(d))&&e.appendTo?c=e.appendTo(c,p):q=d;q&&(c=k(p||c,(p?"-":"")+q));p=null;h&&c.setAttribute(h,""===l?h:l);w&&(c.item=w);c!=f&&(c!=m&&(!n||!n.base))&&u.update(c);f=c})}else f.appendChild(h.createTextNode(a.value))}catch(t){console.error(t,t.stack),f.appendChild(h.createTextNode(t))}}return f}}});
//@ sourceMappingURL=generate.js.map